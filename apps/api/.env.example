NODE_ENV=development
PORT=8080
WEB_ORIGIN=http://localhost:5173

# Set true when serving the site over HTTPS. Keep false for plain HTTP (IP:port).
CSRF_COOKIE_SECURE=false

DATABASE_URL=postgresql://postgres:postgres@localhost:5432/fbif_form
REDIS_URL=redis://localhost:6379

# 32-byte base64 key. Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
DATA_KEY=
DATA_HASH_SALT=

FEISHU_APP_ID=cli_a9f7f8703778dcee
FEISHU_APP_SECRET=
FEISHU_APP_TOKEN=K0QibNToJa5dnvsv8PQccZJLn1f
FEISHU_TABLE_ID=tbl0CQ74guMS1IDd

# Optional: override Feishu field names (Bitable column names).
FEISHU_FIELD_NAME=
FEISHU_FIELD_PHONE=
FEISHU_FIELD_TITLE=
FEISHU_FIELD_COMPANY=
FEISHU_FIELD_ID=
FEISHU_FIELD_IDENTITY=
FEISHU_FIELD_ID_TYPE=
FEISHU_FIELD_BUSINESS_TYPE=
FEISHU_FIELD_DEPARTMENT=
FEISHU_FIELD_PROOF_URL=
FEISHU_FIELD_SUBMITTED_AT=
FEISHU_FIELD_SYNC_STATUS=

RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120
RATE_LIMIT_BURST=20

SYNC_POLL_TIMEOUT_MS=30000

FEISHU_SYNC_ATTEMPTS=8
FEISHU_SYNC_BACKOFF_MS=1000
FEISHU_SYNC_BACKOFF_MAX_MS=120000
FEISHU_WORKER_CONCURRENCY=10
FEISHU_WORKER_QPS=10
# Write readable labels by default to keep WYSIWYG in Bitable text fields.
# If your mapped columns are strict single-select, set option_id.
FEISHU_SELECT_WRITE_MODE=label

# Worker sweeper: periodically re-enqueue orphan submissions (accepted but not enqueued due to transient Redis issues).
SWEEP_PENDING_INTERVAL_MS=15000

MAX_PROOF_URLS=5
MAX_PROOF_URL_LENGTH=2048

# Optional: direct-to-OSS upload (browser uploads, API returns policy/signature).
OSS_ACCESS_KEY_ID=
OSS_ACCESS_KEY_SECRET=
OSS_BUCKET=
OSS_REGION=
# OSS_HOST=https://<bucket>.oss-<region>.aliyuncs.com
OSS_PUBLIC_BASE_URL=
OSS_UPLOAD_PREFIX=fbif-form/proof
OSS_MAX_UPLOAD_MB=50
OSS_POLICY_EXPIRE_SECONDS=600
# Recommend: public-read for per-object ACL (bucket can remain private).
OSS_OBJECT_ACL=public-read

# Optional: Aliyun Market 身份证二要素验证 (APPCODE mode).
# When enabled, CN ID submissions must provide a valid idVerifyToken from /api/id-verify.
ID_VERIFY_ENABLED=false
ID_VERIFY_ALIYUN_HOST=https://sxidcheck.market.alicloudapi.com
ID_VERIFY_ALIYUN_PATH=/idcard/check
ID_VERIFY_APPCODE=
ID_VERIFY_TIMEOUT_MS=5000
ID_VERIFY_TOKEN_TTL_SECONDS=900
